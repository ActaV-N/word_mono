datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model User {
    id          Int          @id @default(autoincrement())
    email       String       @unique
    expressions Expression[]
}

model Expression {
    id     Int  @id @default(autoincrement())
    userId Int
    user   User @relation(fields: [userId], references: [id])

    content   String
    meaning   String?
    media     String?
    category  Category? @default(en)
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt

    cases Case[]

    userNyam UserNyam[]
}

model Case {
    id           Int        @id @default(autoincrement())
    expressionId Int
    expression   Expression @relation(fields: [expressionId], references: [id])

    content String
    meaning String

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    userNyam UserNyam[]
}

model UserNyam {
    id           Int        @id @default(autoincrement())
    expressionId Int
    expression   Expression @relation(fields: [expressionId], references: [id])
    caseId       Int?
    case         Case?      @relation(fields: [caseId], references: [id])

    createdAt DateTime @default(now())
}

enum Category {
    en
    jp
    tr
    wo
}
